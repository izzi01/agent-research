version: 0.1.3
kind: app

app:
  name: "Vietnamese Content Approval Assistant"
  mode: agent
  icon: "ğŸ¨"
  icon_background: "#FFE5B4"
  description: "AI assistant for approving Vietnamese TikTok content. Analyzes quality, suggests approve/reject decisions with reasoning."

model_config:
  provider: zhipuai
  name: glm-4-flash
  mode: chat
  completion_params:
    temperature: 0.7
    max_tokens: 2000

prompt_config:
  pre_prompt: |
    You are an AI assistant specialized in approving Vietnamese TikTok content briefs.
    
    YOUR ROLE:
    - Review Vietnamese content briefs awaiting approval
    - Analyze content quality (hook, hashtags, metrics)
    - Provide approve/reject recommendations with reasoning
    - Support batch operations
    - Communicate in Vietnamese
    
    EVALUATION CRITERIA:
    
    1. Vietnamese Hook Quality:
       - Length: 50-80 chars = optimal, <30 chars = too short, >100 chars = too long
       - Should have question marks or exclamation for engagement
       - Must be culturally appropriate for Vietnamese audience
       - Natural Vietnamese (not translation)
    
    2. Hashtag Analysis:
       - Count: 4-8 hashtags = optimal, <3 = too few, >10 = too many
       - Should include trending hashtag
       - Mix of broad (#TikTokShop) and specific (#SonLÃ¬)
       - Vietnamese hashtags preferred
    
    3. Success Potential:
       - ğŸ”¥ Views > 40,000 = HIGH potential â†’ Recommend APPROVE
       - â­ Views 20,000-40,000 = MEDIUM potential â†’ Consider
       - ğŸ“‰ Views < 20,000 = LOW potential â†’ Recommend REJECT
    
    4. Revenue Potential:
       - ğŸ’° Revenue > 2,000,000 VNÄ = High
       - ğŸ’µ Revenue 500,000-2,000,000 VNÄ = Medium
       - ğŸ“Š Revenue < 500,000 VNÄ = Low
    
    RESPONSE FORMAT:
    When analyzing content, structure your response as:
    
    ```
    ğŸ“‹ PHÃ‚N TÃCH Ná»˜I DUNG - [brief_id]
    
    âœ… ÄIá»‚M Máº NH:
    - [List strengths with metrics]
    
    âš ï¸ ÄIá»‚M Cáº¦N Cáº¢I THIá»†N:
    - [List weaknesses]
    
    ğŸ“Š METRICS:
    - Dá»± kiáº¿n views: [number]
    - Doanh thu: [amount] VNÄ
    - Hashtags: [count]
    - Hook length: [chars]
    
    ğŸ¯ Äá»€ XUáº¤T: [APPROVE/REJECT]
    LÃ½ do: [Specific reasoning]
    ```
    
    COMMANDS YOU UNDERSTAND:
    - "Cho tÃ´i xem ná»™i dung" â†’ Call get_pending_briefs
    - "PhÃª duyá»‡t brief_X" â†’ Call approve_brief
    - "Tá»« chá»‘i brief_Y vÃ¬..." â†’ Call reject_brief  
    - "PhÃ¢n tÃ­ch brief_Z" â†’ Analyze and recommend
    - "PhÃª duyá»‡t táº¥t cáº£ tiá»m nÄƒng cao" â†’ Batch approve >40K views
    
    Always explain your recommendations with data and reasoning.
    Be helpful but honest - don't approve poor content just to please.
  
  user_input_form: []

tools:
  - provider_id: api
    provider_type: api
    tool_name: get_pending_briefs
    tool_parameters:
      method: GET
      url: http://host.docker.internal:8080/api/v1/approvals/pending
      headers:
        Content-Type: application/json
  
  - provider_id: builtin
    provider_type: builtin
    tool_name: approve_brief
    tool_label: "Approve Brief"
    tool_parameters:
      method: POST
      url: http://host.docker.internal:8080/api/v1/approvals/submit
      headers:
        Content-Type: application/json
      body: |
        {
          "brief_id": "{{brief_id}}",
          "approved": true,
          "feedback": "{{feedback}}"
        }
    tool_input:
      brief_id:
        type: string
        required: true
      feedback:
        type: string
        required: false
        default: "Content approved by AI assistant"
  
  - provider_id: builtin
    provider_type: builtin
    tool_name: reject_brief
    tool_label: "Reject Brief"
    tool_parameters:
      method: POST
      url: http://host.docker.internal:8080/api/v1/approvals/submit
      headers:
        Content-Type: application/json
      body: |
        {
          "brief_id": "{{brief_id}}",
          "approved": false,
          "feedback": "{{feedback}}"
        }
    tool_input:
      brief_id:
        type: string
        required: true
      feedback:
        type: string
        required: true

agent_mode:
  enabled: true
  strategy: function_call
  max_iteration: 10

conversation_variables: []

opening_statement: "Xin chÃ o! TÃ´i lÃ  trá»£ lÃ½ phÃª duyá»‡t ná»™i dung AI. TÃ´i cÃ³ thá»ƒ:\n\nâœ“ PhÃ¢n tÃ­ch cháº¥t lÆ°á»£ng ná»™i dung\nâœ“ Äá» xuáº¥t phÃª duyá»‡t/tá»« chá»‘i\nâœ“ PhÃª duyá»‡t hÃ ng loáº¡t\n\nHÃ£y há»i tÃ´i báº¥t cá»© Ä‘iá»u gÃ¬!"

suggested_questions:
  - "Cho tÃ´i xem cÃ¡c ná»™i dung Ä‘ang chá» phÃª duyá»‡t"
  - "PhÃ¢n tÃ­ch ná»™i dung cÃ³ tiá»m nÄƒng cao nháº¥t"
  - "PhÃª duyá»‡t táº¥t cáº£ ná»™i dung trÃªn 40K views"
  - "Táº¡i sao brief nÃ y nÃªn Ä‘Æ°á»£c phÃª duyá»‡t?"

suggested_questions_after_answer:
  enabled: true

speech_to_text:
  enabled: false

text_to_speech:
  enabled: true
  language: vi-VN
  voice: ""

more_like_this:
  enabled: true

retriever_resource:
  enabled: false

sensitive_word_avoidance:
  enabled: false

dataset_configs:
  datasets:
    datasets: []

annotation_reply:
  enabled: false

file_upload:
  image:
    enabled: false
